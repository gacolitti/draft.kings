<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Lineup Optimization • draft.kings</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Lineup Optimization">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">draft.kings</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.5.4</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../index.html" aria-label="Home"><span class="fa fas fa-home"></span></a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/contests.html">Contests</a></li>
    <li><a class="dropdown-item" href="../articles/draftgroups.html">Draft Groups</a></li>
    <li><a class="dropdown-item" href="../articles/leaderboard.html">Leaderboard &amp; Entries</a></li>
    <li><a class="dropdown-item" href="../articles/optimization.html">Lineup Optimization</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/gacolitti/draft.kings" aria-label="GitHub"><span class="fa fab fa-github"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">



<script src="optimization_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Lineup Optimization</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/gacolitti/draft.kings/blob/main/vignettes/optimization.Rmd" class="external-link"><code>vignettes/optimization.Rmd</code></a></small>
      <div class="d-none name"><code>optimization.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://gacolitti.github.io/draft.kings">draft.kings</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="understanding-lineup-optimization">Understanding Lineup Optimization<a class="anchor" aria-label="anchor" href="#understanding-lineup-optimization"></a>
</h2>
<p>Lineup optimization is a crucial piece of daily fantasy sports (DFS) that involves selecting the best possible combination of players within given constraints to maximize potential points. This process is particularly important in DFS platforms like DraftKings, where participants must create lineups under specific rules and salary caps.</p>
<p>Key aspects of lineup optimization in DFS include:</p>
<ol style="list-style-type: decimal">
<li><p>Salary Cap Management: Balancing high-value players with budget-friendly options to stay within the allocated salary cap.</p></li>
<li><p>Position Requirements: Fulfilling specific position quotas required by the contest rules (e.g., 1 QB, 2 RBs, 3 WRs for NFL contests).</p></li>
<li><p>Player Projections: Utilizing accurate projections of player performance, which can be based on historical data, recent form, matchups, and other relevant factors.</p></li>
</ol>
<p>The <code>draft.kings</code> package provides tools to streamline this optimization process, allowing users to leverage DraftKings’ data and perform lineup optimization programmatically. By default, optimization uses Draft Kings player point projections, but you can pass in your own player point projections. Only NFL and NBA contest types are supported currently.</p>
<div class="section level3">
<h3 id="prepare-schematic">Prepare schematic<a class="anchor" aria-label="anchor" href="#prepare-schematic"></a>
</h3>
<p>To perform optimization you must first prepare a schematic. A schematic contains all the necessary information to perform optimization including the contest type, set of players, rules, and expected player points.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">schematic</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dk_prepare_schematic.html">dk_prepare_schematic</a></span><span class="op">(</span>draft_group_id <span class="op">=</span> <span class="fl">80584</span><span class="op">)</span></span>
<span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">schematic</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 3</span></span>
<span><span class="co">#&gt;  $ draft_group   : tibble [106 × 27] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ draftable_id          : num [1:106] 26368922 26368923 26368924 26368925 26368926 ...</span></span>
<span><span class="co">#&gt;   ..$ first_name            : chr [1:106] "Josh" "Tyreek" "Stefon" "Tua" ...</span></span>
<span><span class="co">#&gt;   ..$ last_name             : chr [1:106] "Allen" "Hill" "Diggs" "Tagovailoa" ...</span></span>
<span><span class="co">#&gt;   ..$ display_name          : chr [1:106] "Josh Allen" "Tyreek Hill" "Stefon Diggs" "Tua Tagovailoa" ...</span></span>
<span><span class="co">#&gt;   ..$ short_name            : chr [1:106] "J. Allen" "T. Hill" "S. Diggs" "T. Tagovailoa" ...</span></span>
<span><span class="co">#&gt;   ..$ player_id             : num [1:106] 868199 823156 694041 973947 592195 ...</span></span>
<span><span class="co">#&gt;   ..$ player_dk_id          : num [1:106] 11370 11477 17102 468529 18260 ...</span></span>
<span><span class="co">#&gt;   ..$ position              : chr [1:106] "QB" "WR" "WR" "QB" ...</span></span>
<span><span class="co">#&gt;   ..$ roster_slot_id        : num [1:106] 511 511 511 511 511 511 511 512 511 511 ...</span></span>
<span><span class="co">#&gt;   ..$ salary                : num [1:106] 18600 16500 15900 15600 14100 13500 13200 12400 12000 11700 ...</span></span>
<span><span class="co">#&gt;   ..$ status                : chr [1:106] "None" "None" "None" "None" ...</span></span>
<span><span class="co">#&gt;   ..$ is_swappable          : logi [1:106] FALSE FALSE FALSE FALSE FALSE FALSE ...</span></span>
<span><span class="co">#&gt;   ..$ is_disabled           : logi [1:106] FALSE FALSE FALSE FALSE FALSE FALSE ...</span></span>
<span><span class="co">#&gt;   ..$ news_status           : chr [1:106] "Recent" "Recent" "Recent" "Recent" ...</span></span>
<span><span class="co">#&gt;   ..$ player_image50        : chr [1:106] "https://dkn.gs/sports/images/nfl/players/50/11370.png" "https://dkn.gs/sports/images/nfl/players/50/11477.png" "https://dkn.gs/sports/images/nfl/players/50/17102.png" "https://dkn.gs/sports/images/nfl/players/50/468529.png" ...</span></span>
<span><span class="co">#&gt;   ..$ player_image160       : chr [1:106] "https://dkn.gs/sports/images/nfl/players/160/11370.png" "https://dkn.gs/sports/images/nfl/players/160/11477.png" "https://dkn.gs/sports/images/nfl/players/160/17102.png" "https://dkn.gs/sports/images/nfl/players/160/468529.png" ...</span></span>
<span><span class="co">#&gt;   ..$ alt_player_image50    : chr [1:106] "" "" "" "" ...</span></span>
<span><span class="co">#&gt;   ..$ alt_player_image160   : chr [1:106] "" "" "" "" ...</span></span>
<span><span class="co">#&gt;   ..$ team_id               : num [1:106] 324 345 324 345 345 345 345 324 345 345 ...</span></span>
<span><span class="co">#&gt;   ..$ team_abbreviation     : chr [1:106] "BUF" "MIA" "BUF" "MIA" ...</span></span>
<span><span class="co">#&gt;   ..$ player_game_hash      : chr [1:106] "868199-5819869" "823156-5819869" "694041-5819869" "973947-5819869" ...</span></span>
<span><span class="co">#&gt;   ..$ competition_id        : num [1:106] 5819869 5819869 5819869 5819869 5819869 ...</span></span>
<span><span class="co">#&gt;   ..$ competition_name      : chr [1:106] "MIA @ BUF" "MIA @ BUF" "MIA @ BUF" "MIA @ BUF" ...</span></span>
<span><span class="co">#&gt;   ..$ competition_start_time: chr [1:106] "2023-01-15T18:00:00.0000000Z" "2023-01-15T18:00:00.0000000Z" "2023-01-15T18:00:00.0000000Z" "2023-01-15T18:00:00.0000000Z" ...</span></span>
<span><span class="co">#&gt;   ..$ exp_fp                : num [1:106] 39 36.9 24.3 26.5 -0.3 ...</span></span>
<span><span class="co">#&gt;   ..$ is_captain            : logi [1:106] TRUE TRUE TRUE TRUE TRUE TRUE ...</span></span>
<span><span class="co">#&gt;   ..$ row_number            : int [1:106] 1 2 3 4 5 6 7 8 9 10 ...</span></span>
<span><span class="co">#&gt;  $ rules         : tibble [1 × 26] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ game_type_id                  : int 96</span></span>
<span><span class="co">#&gt;   ..$ game_type_name                : chr "Showdown Captain Mode"</span></span>
<span><span class="co">#&gt;   ..$ game_type_description         : chr "Create your team from 1 game, while staying under the $50,000 salary cap"</span></span>
<span><span class="co">#&gt;   ..$ lineup_configuration_id       : int 81</span></span>
<span><span class="co">#&gt;   ..$ unique_players                : logi TRUE</span></span>
<span><span class="co">#&gt;   ..$ allow_late_swap               : logi FALSE</span></span>
<span><span class="co">#&gt;   ..$ error_status                  : logi NA</span></span>
<span><span class="co">#&gt;   ..$ rules_url                     : chr "/help/rules/1/96"</span></span>
<span><span class="co">#&gt;   ..$ draft_type                    : chr "SalaryCap"</span></span>
<span><span class="co">#&gt;   ..$ allowed_competition_attributes: logi NA</span></span>
<span><span class="co">#&gt;   ..$ scoring_divider               : logi NA</span></span>
<span><span class="co">#&gt;   ..$ use_optimal_lineups           : logi FALSE</span></span>
<span><span class="co">#&gt;   ..$ supports_players_tab          : logi FALSE</span></span>
<span><span class="co">#&gt;   ..$ show_bye_week_info            : logi FALSE</span></span>
<span><span class="co">#&gt;   ..$ original_draft_type           : logi NA</span></span>
<span><span class="co">#&gt;   ..$ is_season_long                : logi FALSE</span></span>
<span><span class="co">#&gt;   ..$ team_position_limits          : logi NA</span></span>
<span><span class="co">#&gt;   ..$ salary_cap_is_enabled         : logi TRUE</span></span>
<span><span class="co">#&gt;   ..$ salary_cap_min_value          : int 0</span></span>
<span><span class="co">#&gt;   ..$ salary_cap_max_value          : int 50000</span></span>
<span><span class="co">#&gt;   ..$ game_count_is_enabled         : logi FALSE</span></span>
<span><span class="co">#&gt;   ..$ game_count_min_value          : logi NA</span></span>
<span><span class="co">#&gt;   ..$ game_count_max_value          : logi NA</span></span>
<span><span class="co">#&gt;   ..$ team_count_is_enabled         : logi TRUE</span></span>
<span><span class="co">#&gt;   ..$ team_count_min_value          : int 2</span></span>
<span><span class="co">#&gt;   ..$ team_count_max_value          : logi NA</span></span>
<span><span class="co">#&gt;  $ draft_group_id: num 80584</span></span>
<span><span class="co">#&gt;  - attr(*, "class")= chr [1:2] "showdown_captain_mode" "list"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="perform-optimization">Perform optimization<a class="anchor" aria-label="anchor" href="#perform-optimization"></a>
</h3>
<p>Pass the schematic object to the optimization function:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">optimal_lineup</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dk_optimize_lineup.html">dk_optimize_lineup</a></span><span class="op">(</span><span class="va">schematic</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="extract-solution">Extract solution<a class="anchor" aria-label="anchor" href="#extract-solution"></a>
</h3>
<p>Finally, extract the solution from the solved model object:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/dk_extract_solution.html">dk_extract_solution</a></span><span class="op">(</span><span class="va">optimal_lineup</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 4</span></span>
<span><span class="co">#&gt;  $ optimal_lineup:'data.frame':  6 obs. of  26 variables:</span></span>
<span><span class="co">#&gt;   ..$ draftable_id          : num [1:6] 26368922 26368976 26368982 26368990 26368996 ...</span></span>
<span><span class="co">#&gt;   ..$ first_name            : chr [1:6] "Josh" "Tyreek" "Raheem" "James" ...</span></span>
<span><span class="co">#&gt;   ..$ last_name             : chr [1:6] "Allen" "Hill" "Mostert" "Cook" ...</span></span>
<span><span class="co">#&gt;   ..$ display_name          : chr [1:6] "Josh Allen" "Tyreek Hill" "Raheem Mostert" "James Cook" ...</span></span>
<span><span class="co">#&gt;   ..$ short_name            : chr [1:6] "J. Allen" "T. Hill" "R. Mostert" "J. Cook" ...</span></span>
<span><span class="co">#&gt;   ..$ player_id             : num [1:6] 868199 823156 606501 1131012 821895 ...</span></span>
<span><span class="co">#&gt;   ..$ player_dk_id          : num [1:6] 11370 11477 19614 640895 14871 ...</span></span>
<span><span class="co">#&gt;   ..$ position              : chr [1:6] "QB" "WR" "RB" "RB" ...</span></span>
<span><span class="co">#&gt;   ..$ roster_slot_id        : num [1:6] 511 512 512 512 512 512</span></span>
<span><span class="co">#&gt;   ..$ salary                : num [1:6] 18600 11000 8000 5400 3800 3200</span></span>
<span><span class="co">#&gt;   ..$ status                : chr [1:6] "None" "None" "None" "None" ...</span></span>
<span><span class="co">#&gt;   ..$ is_swappable          : logi [1:6] FALSE FALSE FALSE FALSE FALSE FALSE</span></span>
<span><span class="co">#&gt;   ..$ is_disabled           : logi [1:6] FALSE FALSE FALSE FALSE FALSE FALSE</span></span>
<span><span class="co">#&gt;   ..$ news_status           : chr [1:6] "Recent" "Recent" "Breaking" "Recent" ...</span></span>
<span><span class="co">#&gt;   ..$ player_image50        : chr [1:6] "https://dkn.gs/sports/images/nfl/players/50/11370.png" "https://dkn.gs/sports/images/nfl/players/50/11477.png" "https://dkn.gs/sports/images/nfl/players/50/19614.png" "https://dkn.gs/sports/images/nfl/players/50/640895.png" ...</span></span>
<span><span class="co">#&gt;   ..$ player_image160       : chr [1:6] "https://dkn.gs/sports/images/nfl/players/160/11370.png" "https://dkn.gs/sports/images/nfl/players/160/11477.png" "https://dkn.gs/sports/images/nfl/players/160/19614.png" "https://dkn.gs/sports/images/nfl/players/160/640895.png" ...</span></span>
<span><span class="co">#&gt;   ..$ alt_player_image50    : chr [1:6] "" "" "" "" ...</span></span>
<span><span class="co">#&gt;   ..$ alt_player_image160   : chr [1:6] "" "" "" "" ...</span></span>
<span><span class="co">#&gt;   ..$ team_id               : num [1:6] 324 345 345 324 345 345</span></span>
<span><span class="co">#&gt;   ..$ team_abbreviation     : chr [1:6] "BUF" "MIA" "MIA" "BUF" ...</span></span>
<span><span class="co">#&gt;   ..$ player_game_hash      : chr [1:6] "868199-5819869" "823156-5819869" "606501-5819869" "1131012-5819869" ...</span></span>
<span><span class="co">#&gt;   ..$ competition_id        : num [1:6] 5819869 5819869 5819869 5819869 5819869 ...</span></span>
<span><span class="co">#&gt;   ..$ competition_name      : chr [1:6] "MIA @ BUF" "MIA @ BUF" "MIA @ BUF" "MIA @ BUF" ...</span></span>
<span><span class="co">#&gt;   ..$ competition_start_time: chr [1:6] "2023-01-15T18:00:00.0000000Z" "2023-01-15T18:00:00.0000000Z" "2023-01-15T18:00:00.0000000Z" "2023-01-15T18:00:00.0000000Z" ...</span></span>
<span><span class="co">#&gt;   ..$ exp_fp                : num [1:6] 39 24.6 17.4 14.1 8.2 8.6</span></span>
<span><span class="co">#&gt;   ..$ is_captain            : logi [1:6] TRUE FALSE FALSE FALSE FALSE FALSE</span></span>
<span><span class="co">#&gt;  $ draft_group_id: num 80584</span></span>
<span><span class="co">#&gt;  $ salary_total  : num 50000</span></span>
<span><span class="co">#&gt;  $ exp_fp_total  : num 112</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/gacolitti" class="external-link">Giovanni Colitti</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
